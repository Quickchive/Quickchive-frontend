{"version":3,"sources":["webpack:///./src/views/SearchView.vue","webpack:///./src/utils/search.js","webpack:///src/views/SearchView.vue","webpack:///./src/views/SearchView.vue?6028","webpack:///./src/views/SearchView.vue?e643"],"names":["render","_vm","this","_c","_self","staticClass","resultArr","length","_v","_s","$store","getters","getSearchWord","_e","_l","data","index","key","contents","attrs","staticRenderFns","findData","word","collection","targetData","findFromTitle","filter","title","includes","containMemo","comment","console","log","findFromMemo","containContents","i","findFromContents","result","push","resultData","set","Set","uniqueArr","components","ContentsComponent","CollectionComponent","newCategoryName","contentsData","collectionData","searchEvent","methods","component"],"mappings":"uHAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,eAAe,CAA2B,IAAxBJ,EAAIK,UAAUC,OAAaJ,EAAG,MAAM,CAACE,YAAY,mBAAmB,CAACJ,EAAIO,GAAG,KAAKP,EAAIQ,GAAGP,KAAKQ,OAAOC,QAAQC,eAAe,kBAAkBT,EAAG,OAAO,CAACE,YAAY,2BAA2B,CAACJ,EAAIO,GAAGP,EAAIQ,GAAGR,EAAIK,UAAUC,WAAWN,EAAIO,GAAG,cAAcP,EAAIY,KAAKV,EAAG,MAAM,CAAEF,EAAIK,UAAWH,EAAG,MAAM,CAACF,EAAIa,GAAIb,EAAIK,WAAW,SAASS,EAAKC,GAAO,OAAOb,EAAG,MAAM,CAACc,IAAID,GAAO,CAAGf,EAAIK,UAAUU,GAAOE,SAAiEjB,EAAIY,KAA3DV,EAAG,qBAAqB,CAACgB,MAAM,CAAC,aAAeJ,KAAkBd,EAAIK,UAAUU,GAAOE,SAAUf,EAAG,uBAAuB,CAACgB,MAAM,CAAC,eAAiBJ,KAAQd,EAAIY,MAAM,MAA8B,GAAxBZ,EAAIK,UAAUC,OAAaJ,EAAG,MAAM,CAACE,YAAY,aAAa,CAACJ,EAAIO,GAAG,KAAKP,EAAIQ,GAAGP,KAAKQ,OAAOC,QAAQC,eAAe,0BAA0BX,EAAIY,MAAM,GAAGZ,EAAIY,UAEr0BO,EAAkB,G,gDCAtB,SAASC,EAASC,EAAMJ,EAAUK,GAEhC,MAAMC,EAAa,IAAIN,KAAaK,GAG9BE,EAAgBD,EAAWE,OAAQX,GAEvCA,EAAKY,MAAMC,SAASN,IAIhBO,EAAcL,EAAWE,OAAQX,GAASA,EAAKe,SACrDC,QAAQC,IAAI,MAAOH,GAGnB,MAAMI,EAAeJ,EAAYH,OAAQX,GACvCA,EAAKe,QAAQF,SAASN,IAExBS,QAAQC,IAAI,MAAOC,GAGnB,MAAMC,EAAkBX,EAAWG,OAAQX,GAASA,EAAKG,SAASX,OAAS,GAC3EwB,QAAQC,IAAI,yBAA0BE,GAEtC,IAAIC,EAAI,EACR,MAAMC,EAAmB,GACzB,IAAKD,EAAI,EAAGA,EAAID,EAAgB3B,OAAQ4B,IAAK,CAC3C,MAAME,EAASH,EAAgBC,GAAGjB,SAASQ,OAAQX,GACjDA,EAAKY,MAAMC,SAASN,IAElBe,EAAO9B,OAAS,GAClB6B,EAAiBE,KAAKJ,EAAgBC,IAI1C,MAAMI,EAAa,IAAId,KAAkBW,KAAqBH,GAExDO,EAAM,IAAIC,IAAIF,GACdG,EAAY,IAAIF,GAGtB,OADAT,QAAQC,IAAIU,GACLA,ECHM,OACfC,YACAC,yBACAC,4BAEA9B,OACA,OACA+B,mBACAC,gBACAC,kBAEA1C,aACAS,QACAkC,cACA3B,UAGA,sBACA,+BACA,iCACA,+BACA,oBACAS,0BACA,6DASAmB,SAEA,0BACA,IACA,+BACA,kCACA,SACAnB,iBAIA,4BACA,IACA,+BACA,uCACA,SACAA,iBAIAV,WACA,sDAIA,iCCjGoV,I,YCOhV8B,EAAY,eACd,EACAnD,EACAoB,GACA,EACA,KACA,KACA,MAIa,aAAA+B,E","file":"js/chunk-2d226785.8b281db4.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"search-view\"},[(!_vm.resultArr.length == 0)?_c('div',{staticClass:\"search__wrapper\"},[_vm._v(\" '\"+_vm._s(this.$store.getters.getSearchWord)+\"' 에 대한 검색 결과가 \"),_c('span',{staticClass:\"search__text--highlight\"},[_vm._v(_vm._s(_vm.resultArr.length))]),_vm._v(\"건 있습니다. \")]):_vm._e(),_c('div',[(_vm.resultArr)?_c('div',[_vm._l((_vm.resultArr),function(data,index){return _c('div',{key:index},[(!_vm.resultArr[index].contents)?_c('contents-component',{attrs:{\"contentsData\":data}}):_vm._e(),(_vm.resultArr[index].contents)?_c('collection-component',{attrs:{\"collectionData\":data}}):_vm._e()],1)}),(_vm.resultArr.length == 0)?_c('div',{staticClass:\"no-result\"},[_vm._v(\" '\"+_vm._s(this.$store.getters.getSearchWord)+\"'에 대한 검색 결과가 없습니다😯 \")]):_vm._e()],2):_vm._e()])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// 검색\n\nfunction findData(word, contents, collection) {\n  // 검색 대상 데이터의 제목에서 word와 일치하는게 있으면 해당 배열을 반환한다.\n  const targetData = [...contents, ...collection];\n\n  // 1. 제목에 검색어가 있는 배열만 반환\n  const findFromTitle = targetData.filter((data) =>\n    // 검색 기준: 제목, 콘텐츠, 메모\n    data.title.includes(word)\n  );\n\n  // // 2.1 메모 중 검색어가 있는 배열만 반환\n  const containMemo = targetData.filter((data) => data.comment);\n  console.log(\"2-1\", containMemo);\n\n  // 2.2 콘텐츠 || 콜렉션 메모가 존재하는 배열만 반환 (data.comment)\n  const findFromMemo = containMemo.filter((data) =>\n    data.comment.includes(word)\n  );\n  console.log(\"2-2\", findFromMemo);\n\n  // 3-1. 콜렉션 - 콘텐츠 목록에 검색어가 있는 배열만 반환\n  const containContents = collection.filter((data) => data.contents.length > 0);\n  console.log(\"3-1 콜렉션 - 콘텐츠가 존재하는 배열\", containContents);\n\n  let i = 0;\n  const findFromContents = [];\n  for (i = 0; i < containContents.length; i++) {\n    const result = containContents[i].contents.filter((data) =>\n      data.title.includes(word)\n    );\n    if (result.length > 0) {\n      findFromContents.push(containContents[i]);\n    }\n  }\n\n  const resultData = [...findFromTitle, ...findFromContents, ...findFromMemo];\n\n  const set = new Set(resultData);\n  const uniqueArr = [...set];\n\n  console.log(uniqueArr);\n  return uniqueArr;\n}\n\nexport { findData };\n","<template>\n  <div class=\"search-view\">\n    <div v-if=\"!resultArr.length == 0\" class=\"search__wrapper\">\n      '{{ this.$store.getters.getSearchWord }}' 에 대한 검색 결과가\n      <span class=\"search__text--highlight\">{{ resultArr.length }}</span\n      >건 있습니다.\n    </div>\n    <div>\n      <!-- 1. 검색 결과 있을 때 -->\n      <div v-if=\"resultArr\">\n        <!-- 콘텐츠 컴포넌트 -->\n        <div v-for=\"(data, index) in resultArr\" :key=\"index\">\n          <contents-component\n            :contentsData=\"data\"\n            v-if=\"!resultArr[index].contents\"\n          ></contents-component>\n          <!-- 콜렉션 컴포넌트 -->\n          <collection-component\n            v-if=\"resultArr[index].contents\"\n            :collectionData=\"data\"\n          ></collection-component>\n        </div>\n\n        <!-- 2. 검색 결과 없을 때 -->\n        <div class=\"no-result\" v-if=\"resultArr.length == 0\">\n          '{{ this.$store.getters.getSearchWord }}'에 대한 검색 결과가\n          없습니다😯\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport ContentsComponent from \"@/components/content/ContentsComponent.vue\";\nimport CollectionComponent from \"@/components/collection/CollectionComponent.vue\";\nimport { fetchMyContents, fetchMyCollections } from \"@/api/user\";\nimport { eventBus } from \"@/main.js\";\nimport { findData } from \"@/utils/search.js\";\n\nexport default {\n  components: {\n    ContentsComponent,\n    CollectionComponent,\n  },\n  data() {\n    return {\n      newCategoryName: \"\",\n      contentsData: [],\n      collectionData: [],\n      // 검색어\n      resultArr: [],\n      data: \"\",\n      searchEvent: 0,\n      word: \"\",\n    };\n  },\n  async created() {\n    await this.fetchContentsList();\n    await this.fetchCollectionList();\n    await eventBus.$on(\"search\", (word) => {\n      this.searchEvent += 1;\n      console.log(\"이벤트 버스ㄴㄴ\", word);\n      this.resultArr = findData(word, this.contentsData, this.collectionData);\n    });\n  },\n  // watch: {\n  //   searchEvent: function () {\n  //     const targetData = [...this.contentsData, ...this.collectionData];\n  //     this.resultArr = findData(this.word, targetData);\n  //   },\n  // },\n  methods: {\n    // 나의 콘텐츠 조회\n    async fetchContentsList() {\n      try {\n        const response = await fetchMyContents();\n        this.contentsData = response.data.contents;\n      } catch (error) {\n        console.log(error);\n      }\n    },\n    // 나의 콜렉션 조회\n    async fetchCollectionList() {\n      try {\n        const response = await fetchMyCollections();\n        this.collectionData = response.data.collections;\n      } catch (error) {\n        console.log(error);\n      }\n    },\n    // 검색\n    findData() {\n      const targetData = [...this.contentsData, ...this.collectionData];\n      // const word = this.$store.getters.getSearchWord;\n      // console.log(this.word, \"검색 이벤트\");\n\n      this.resultArr = findData(this.word, targetData);\n    },\n  },\n};\n</script>\n\n<style></style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SearchView.vue?vue&type=template&id=4469ac5c&\"\nimport script from \"./SearchView.vue?vue&type=script&lang=js&\"\nexport * from \"./SearchView.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}